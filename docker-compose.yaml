services:
  lnapp:
    restart: always
    build:
      context: .
      dockerfile: Dockerfile
    container_name: safebox
    ports:
      - "7375:7375"
    environment:
      - HOME_RELAY=ws://localhost:8735
    volumes:
      - ./app/templates:/app/app/templates
      - ./data:/app/data
      - ./setup:/app/setup

    # command: ["poetry", "run", "uvicorn", "app.main:app", "--host","0.0.0.0","--port","7375"]
    command: ["gunicorn", "app.main:app", "--workers", "4", "--worker-class", "uvicorn.workers.UvicornWorker", "--bind", "0.0.0.0:7375", "--timeout", "120"]
    # command: ["hypercorn", "app.main:app", "--workers", "4", "--bind", "0.0.0.0:7375" ]
    
